<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html">

<h:head>
    <link href="./css/bootstrap.css" rel="stylesheet"/>
    <title>Easy EMR</title>
</h:head>

<h:body>
<p:layout fullPage="true">

<p:layoutUnit position="center">

    <div class="container well">
        <h:form>
            <h4>Search:</h4><br/>
            Card ID <h:inputText id="cardID" style="width:85px" value="#{encounterService.searchPatientCardID }"/>
            <h:commandButton id="searchCard" value="Search" action="#{encounterService.searchCardID2 }">
            </h:commandButton>
        </h:form>

        <p:dataTable id="dataTable" var="patient" value="#{encounterService.patientList}" paginator="true" rows="10">

            <f:facet name="header">
                Patient Search
            </f:facet>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Patient ID"/>
                </f:facet>
                <h:outputText value="#{patient.patientID }"/>
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="First Name"/>
                </f:facet>
                <h:outputText value="#{patient.firstName}"/>
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Last Name"/>
                </f:facet>
                <h:outputText value="#{patient.lastName}"/>
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:column>
                        <h:outputText value="Action"/>
                    </h:column>
                </f:facet>
                <p:panelGrid columns="2">
                    <p:commandLink value="Select" action="#{encounterService.selectPatient2}">
                        <f:setPropertyActionListener target="#{encounterService.patient}" value="#{patient}"/>
                    </p:commandLink>

                </p:panelGrid>
            </p:column>

        </p:dataTable>
        <p:blockUI block="dataTable" trigger="dataTable">
            LOADING<br/>
            <p:graphicImage value="/images/ajax-loader.gif"/>
        </p:blockUI>

        <br></br>
        <p:dataTable id="dataTable2" var="encounter" value="#{encounterService.searchList}" paginator="true" rows="10">

            <f:facet name="header">
                Patient Encounter
            </f:facet>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Encounter ID"/>
                </f:facet>
                <h:outputText value="#{encounter.encounterID}"/>
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Chief Complaint"/>
                </f:facet>
                <h:outputText value="#{encounter.chiefComplaint}"/>
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:column>
                        <h:outputText value="Action"/>
                    </h:column>
                </f:facet>
                <h:panelGrid columns="2">
                    <p:commandLink value="Select" action="#{encounterService.selectPatient2}">
                        <f:setPropertyActionListener target="#{encounterService.encounter}" value="#{encounter}"/>
                    </p:commandLink>
                </h:panelGrid>
            </p:column>

        </p:dataTable>
        <p:blockUI block="dataTable" trigger="dataTable">
            LOADING<br/>
            <p:graphicImage value="/images/ajax-loader.gif"/>
        </p:blockUI>

        <center>
            <h:form>
                <table>

                    <tr>
                        <td><h5>First Name</h5></td>
                        <td><h5>Last Name</h5></td>
                    </tr>

                    <tr>
                        <td><p:inputText style="width:160px" id="firstName"
                                         value="#{pharmacyEncounterService.firstName }" required="true"/></td>
                        <td><p:inputText style="width:160px" id="lastName" value="#{pharmacyEncounterService.lastName }"
                                         required="true"/></td>
                    </tr>


                    <tr>
                        <td><h5>Problem List</h5></td>
                        <td><h5>Prescription</h5></td>
                        <!--as far as I can tell there needs to be an output label for the autocomplete -->
                        <td><h5><h:outputLabel value="Medication Given"  for="prescriptionGiven1"></h:outputLabel></h5></td>
                    </tr>

                    <tr>
                        <td><h:outputLabel value="#{encounterService.encounter.condition1}"></h:outputLabel></td>
                        <td><h:outputLabel value="#{encounterService.encounter.medicationPrescribed1}"></h:outputLabel>
                        </td>
                        <td><p:autoComplete id="prescriptionGiven1" completeMethod="#{autoCompleteDrugsBean.complete}"
                                         value="#{pharmacyEncounterService.medDispensed1 }"/></td>

                    </tr>

                    <tr>
                        <td><h:outputLabel value="#{encounterService.encounter.condition2}"></h:outputLabel></td>
                        <td><h:outputLabel value="#{encounterService.encounter.medicationPrescribed2}"></h:outputLabel>
                        </td>
                        <td><p:inputText style="width:160px" id="prescriptionGiven2"
                                         value="#{pharmacyEncounterService.medDispensed2 }"/></td>

                    </tr>

                    <tr>
                        <td><h:outputLabel value="#{encounterService.encounter.condition3}"></h:outputLabel></td>
                        <td><h:outputLabel value="#{encounterService.encounter.medicationPrescribed3}"></h:outputLabel>
                        </td>
                        <td><p:inputText style="width:160px" id="prescriptionGiven3"
                                         value="#{pharmacyEncounterService.medDispensed3 }"/></td>

                    </tr>


                    <tr>
                        <td><h:outputLabel value="#{encounterService.encounter.condition4}"></h:outputLabel></td>
                        <td><h:outputLabel value="#{encounterService.encounter.medicationPrescribed4}"></h:outputLabel>
                        </td>
                        <td><p:inputText style="width:160px" id="prescriptionGiven4"
                                         value="#{pharmacyEncounterService.medDispensed4 }"/></td>

                    </tr>

                    <tr>
                        <td><h:outputLabel value="#{encounterService.encounter.condition5}"></h:outputLabel></td>
                        <td><h:outputLabel value="#{encounterService.encounter.medicationPrescribed5}"></h:outputLabel>
                        </td>
                        <td><p:inputText style="width:160px" id="prescriptionGiven5"
                                         value="#{pharmacyEncounterService.medDispensed5 }"/></td>
                    </tr>


                </table>

                <br/>

                <p:commandButton id="submit" value="Submit"
                                 action="#{pharmacyEncounterService.dataToDatabase }"></p:commandButton>
            </h:form>
        </center>

    </div>
</p:layoutUnit>

<!-- Begin Navigation bar-->
<div class="navbar navbar-fixed-bottom center">
<div class="navbar-inner">
    <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Easy EMR</a>
        <div class="nav-collapse">
            <ul class="nav">
                <li><a href="triage.xhtml">Triage</a></li>
                <li><a href="create.xhtml">Medical</a></li>
                <li class="active"><a href="#"><i class="icon-home icon-white"></i>Pharmacy</a></li>
            </ul>
            <h:form class="navbar pull-right" action="">
                <!--<input type="text" class="search-query span2" placeholder="Search"/>-->
                <h:commandLink value="Log Out" tabindex="-2" action="#{loginBean.logout}"></h:commandLink>
            </h:form>
        </div><!-- /.nav-collapse -->
    </div><!-- /.container -->
</div><!-- /.navbar-inner -->
</div>


</p:layout>

</h:body>

</html>




